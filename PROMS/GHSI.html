<!DOCTYPE html>
<html lang="fr">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GHSI</title>
    <style>
      body {
        font-family: Montserrat, sans-serif;
      }

      table {
        margin-bottom: 15px;
        margin-top: 15px;
        border-collapse: collapse;
        width: 80%;
        margin-left: auto;
        margin-right: auto;
      }
      th,
      td {
        border: 1px solid black !important;
        padding: 5px;
        text-align: center;
      }

      tr:nth-child(odd) {
        background-color: #eeeeee;
      }

      .question-text-row td {
        text-align: left;
        font-weight: bold;
        background-color: #eeeeeee; 
      }

      .options-row td {
        vertical-align: top;
        text-align: center; 
      }

      label {
        display: inline-block; 
        margin-right: 20px; 
        margin-bottom: 5px; /* Keep some vertical margin */
        text-align: center; /* Center text and radio button within the label */
        white-space: nowrap; /* Prevent text wrapping within labels if they are too long */
      }

      label input[type="radio"] { 
        display: block; 
        margin: 5px auto 0; 
      }


      /* Add inner margin (padding) within the form*/
      #GHSI{
        padding-left:40px;
        padding-right:40px;
      }




      .buttons-container {
        text-align: center;
        margin-top: 30px;
      }
      .buttons-container button {
        padding: 12px 25px;
        margin: 0 10px;
        font-size: 17px;
        cursor: pointer;
        border: none;
        border-radius: 5px;
        background-color: #eeeeee;

      }

      .buttons-container button:hover {
        background-color: #0056b3;
        color : white;
      }

      #result { /* Correction ici : cibler l'ID directement */
        text-align: center;
        font-size: 20px;
        margin-top: 30px;
        border: 1px solid #eeeeee;
        background-color: #eeeeee;
        padding: 15px;
        display: none;
        border-radius: 5px;
        padding: 15px;
        display:none;
      }

      ul.myList {
        display: inline-block;
        text-align: left;
      }



    </style>
  </head>
  <body>

    <h1 style="text-align: center;">Glasgow Health Questionnaires (GHSI)</h1>
    <p style="text-align: center;">MRC Institute of Hearing Research, 1998</p>
    <br>

    <form id="GHSI">
      <table>
        <tbody>
          <tr class="question-text-row">
            <td colspan="6">1. Votre surdité affecte-t-elle souvent vos activités ?</td>
          </tr>
          <tr class="options-row">
            <td colspan="6">
              <label>Fréquemment ou tout le temps <input type="radio" name="q1" value="1"></label>
              <label>La moitié du temps <input type="radio" name="q1" value="2"></label>
              <label>Parfois <input type="radio" name="q1" value="3"></label>
              <label>Rarement <input type="radio" name="q1" value="4"></label>
              <label>Jamais <input type="radio" name="q1" value="5"></label>
            </td>
          </tr>
          <tr class="question-text-row">
            <td colspan="6">2. Dans quelle mesure votre surdité affecte-t-elle votre vie en général ?</td>
          </tr>
          <tr class="options-row">
            <td colspan="6">
              <label>Pas du tout <input type="radio" name="q2" value="5"></label>
              <label>Très peu <input type="radio" name="q2" value="4"></label>
              <label>Un peu <input type="radio" name="q2" value="3"></label>
              <label>Moyennement <input type="radio" name="q2" value="2"></label>
              <label>Beaucoup <input type="radio" name="q2" value="1"></label>
            </td>
          </tr>
          <tr class="question-text-row">
            <td colspan="6">3. Parmi les propositions suivantes, laquelle décrit le mieux votre attitude face à l'avenir?</td>
          </tr>
          <tr class="options-row">
            <td colspan="6">
              <label>Optimiste <input type="radio" name="q3" value="5"></label>
              <label>Assez optimiste <input type="radio" name="q3" value="4"></label>
              <label>Ne sait pas <input type="radio" name="q3" value="3"></label>
              <label>Assez pessimiste <input type="radio" name="q3" value="2"></label>
              <label>Pessimiste <input type="radio" name="q3" value="1"></label>
            </td>
          </tr>
          <tr class="question-text-row">
            <td colspan="6">4. En raison de votre surdité, vous sentez-vous souvent gêné(e) dans un groupe de gens?</td>
          </tr>
          <tr class="options-row">
            <td colspan="6">
              <label>Fréquemment <br>ou tout le temps <input type="radio" name="q4" value="1"></label>
              <label>La moitié <br>du temps <input type="radio" name="q4" value="2"></label>
              <label>Parfois <input type="radio" name="q4" value="3"></label>
              <label>Rarement <input type="radio" name="q4" value="4"></label>
              <label>Jamais <input type="radio" name="q4" value="5"></label>
            </td>
          </tr>
          <tr class="question-text-row">
            <td colspan="6">5. Votre confiance en vous est-elle affectée par votre surdité ?</td>
          </tr>
          <tr class="options-row">
            <td colspan="6">
              <label>Pas du tout <input type="radio" name="q5" value="5"></label>
              <label>Très peu <input type="radio" name="q5" value="4"></label>
              <label>Un peu <input type="radio" name="q5" value="3"></label>
              <label>Moyennement <input type="radio" name="q5" value="2"></label>
              <label>Beaucoup <input type="radio" name="q5" value="1"></label>
            </td>
          </tr>
          <tr class="question-text-row">
            <td colspan="6">6. Les difficultés liées à votre surdité affectent-elles souvent vos rapports avec les autres ?</td>
          </tr>
          <tr class="options-row">
            <td colspan="6">
              <label>Jamais <input type="radio" name="q6" value="5"></label>
              <label>Rarement <input type="radio" name="q6" value="4"></label>
              <label>Parfois <input type="radio" name="q6" value="3"></label>
              <label>Fréquemment <input type="radio" name="q6" value="2"></label>
              <label>Tout le temps <input type="radio" name="q6" value="1"></label>
            </td>
          </tr>
          <tr class="question-text-row">
            <td colspan="6">7. Êtes-vous soutenu(e) par vos amis ?</td>
          </tr>
          <tr class="options-row">
            <td colspan="6">
              <label>Extrêmement<br> soutenu(e) <input type="radio" name="q7" value="5"></label>
              <label>Très<br> soutenu(e) <input type="radio" name="q7" value="4"></label>
              <label>Assez <br>soutenu(e) <input type="radio" name="q7" value="3"></label>
              <label>Un peu<br> soutenu(e) <input type="radio" name="q7" value="2"></label>
              <label>Très peu ou<br> pas du tout <input type="radio" name="q7" value="1"></label>
            </td>
          </tr>
          <tr class="question-text-row">
            <td colspan="6">8. Consultez-vous souvent votre médecin de famille pour une raison ou pour une autre ?</td>
          </tr>
          <tr class="options-row">
            <td colspan="6">
              <label>Au moins <br>sept fois par an <input type="radio" name="q8" value="1"></label>
              <label>Cinq ou six <br>fois par an <input type="radio" name="q8" value="2"></label>
              <label>Trois ou quatre <br>fois par an <input type="radio" name="q8" value="3"></label>
              <label>Une ou deux <br>fois par an <input type="radio" name="q8" value="4"></label>
              <label>Jamais <input type="radio" name="q8" value="5"></label>
            </td>
          </tr>
          <tr class="question-text-row">
            <td colspan="6">9. Les difficultés liées à votre surdité affectent-elles souvent la façon dont vous considérez vos possibilités d'emploi ?</td>
          </tr>
          <tr class="options-row">
            <td colspan="6">
              <label>Jamais <input type="radio" name="q9" value="5"></label>
              <label>Rarement <input type="radio" name="q9" value="4"></label>
              <label>Parfois <input type="radio" name="q9" value="3"></label>
              <label>Fréquemment <input type="radio" name="q9" value="2"></label>
              <label>Tout le temps <input type="radio" name="q9" value="1"></label>
            </td>
          </tr>
          <tr class="question-text-row">
            <td colspan="6">10. Les difficultés liées à votre surdité vous rendent-elles souvent timide ?</td>
          </tr>
          <tr class="options-row">
            <td colspan="6">
              <label>Fréquemment <br>ou tout le temps <input type="radio" name="q10" value="1"></label>
              <label>La moitié <br>du temps <input type="radio" name="q10" value="2"></label>
              <label>Parfois <input type="radio" name="q10" value="3"></label>
              <label>Rarement <input type="radio" name="q10" value="4"></label>
              <label>Jamais <input type="radio" name="q10" value="5"></label>
            </td>
          </tr>
          <tr class="question-text-row">
            <td colspan="6">11. Combien de personnes s'occupent vraiment de vous ?</td>
          </tr>
          <tr class="options-row">
            <td colspan="6">
              <label>Plus de <br>six personnes <input type="radio" name="q11" value="1"></label>
              <label>Cinq ou <br>six personnes <input type="radio" name="q11" value="2"></label>
              <label>Trois ou <br>quatre personnes <input type="radio" name="q11" value="3"></label>
              <label>Une ou <br>deux personnes <input type="radio" name="q11" value="4"></label>
              <label>Aucune <input type="radio" name="q11" value="5"></label>
            </td>
          </tr>
          <tr class="question-text-row">
            <td colspan="6">12. Si un rhume ou une infection circule, l'attrapez-vous souvent ?</td>
          </tr>
          <tr class="options-row">
            <td colspan="6">
              <label>Fréquemment ou<br> tout le temps <input type="radio" name="q12" value="1"></label>
              <label>La moitié <br>du temps <input type="radio" name="q12" value="2"></label>
              <label>Parfois <input type="radio" name="q12" value="3"></label>
              <label>Rarement <input type="radio" name="q12" value="4"></label>
              <label>Jamais <input type="radio" name="q12" value="5"></label>
            </td>
          </tr>
          <tr class="question-text-row">
            <td colspan="6">13. Devez-vous souvent prendre des médicaments pour une raison ou pour une autre ?</td>
          </tr>
          <tr class="options-row">
            <td colspan="6">
              <label>Fréquemment <br>ou tout le temps <input type="radio" name="q13" value="1"></label>
              <label>La moitié <br>du temps <input type="radio" name="q13" value="2"></label>
              <label>Parfois <input type="radio" name="q13" value="3"></label>
              <label>Rarement <input type="radio" name="q13" value="4"></label>
              <label>Jamais <input type="radio" name="q13" value="5"></label>
            </td>
          </tr>
          <tr class="question-text-row">
            <td colspan="6">14. Les difficultés liées à votre surdité ont-elles un effet sur la façon dont vous vous considérez?</td>
          </tr>
          <tr class="options-row">
            <td colspan="6">
              <label>Aucun effet <input type="radio" name="q14" value="5"></label>
              <label>Très peu d'effet <input type="radio" name="q14" value="4"></label>
              <label>Peu d'effet <input type="radio" name="q14" value="3"></label>
              <label>Un peu d'effet <input type="radio" name="q14" value="2"></label>
              <label>Beaucoup d'effet <input type="radio" name="q14" value="1"></label>
            </td>
          </tr>
          <tr class="question-text-row">
            <td colspan="6">15. Êtes-vous soutenu(e) par votre famille ?</td>
          </tr>
          <tr class="options-row">
            <td colspan="6">
              <label>Extrêmement <br>soutenu(e) <input type="radio" name="q15" value="5"></label>
              <label>Très<br> soutenu(e) <input type="radio" name="q15" value="4"></label>
              <label>Assez <br>soutenu(e) <input type="radio" name="q15" value="3"></label>
              <label>Un peu <br>soutenu(e) <input type="radio" name="q15" value="2"></label>
              <label>Très peu ou <br>pas du tout soutenu(e) <input type="radio" name="q15" value="1"></label>
            </td>
          </tr>
          <tr class="question-text-row">
            <td colspan="6">16. Êtes-vous souvent gêné(e) par votre surdité ?</td>
          </tr>
          <tr class="options-row">
            <td colspan="6">
              <label>Tous les jours<br> <input type="radio" name="q16" value="1"></label>
              <label>Une ou deux <br>fois par semaine <input type="radio" name="q16" value="2"></label>
              <label>Une ou deux <br>fois par mois <input type="radio" name="q16" value="3"></label>
              <label>Moins de 6 <br>fois par an <input type="radio" name="q16" value="4"></label>
              <label>Jamais <input type="radio" name="q16" value="5"></label>
            </td>
          </tr>
          <tr class="question-text-row">
            <td colspan="6">17. Participez-vous souvent à des activités en société ?</td>
          </tr>
          <tr class="options-row">
            <td colspan="6">
              <label>Plus de trois<br> fois par jour <input type="radio" name="q17" value="5"></label>
              <label>Une ou deux <br>fois par jour <input type="radio" name="q17" value="4"></label>
              <label>Une ou deux <br>fois par semaine <input type="radio" name="q17" value="3"></label>
              <label>Une ou deux <br>fois par mois <input type="radio" name="q17" value="2"></label>
              <label>Moins de 1 <br>fois par mois <input type="radio" name="q17" value="1"></label>
            </td>
          </tr>
          <tr class="question-text-row">
            <td colspan="6">18. Ressentez-vous souvent le besoin de vous retrouver seul(e)?</td>
          </tr>
          <tr class="options-row">
            <td colspan="6">
              <label>Fréquemment ou <br>tout le temps <input type="radio" name="q18" value="1"></label>
              <label>La moitié <br>du temps <input type="radio" name="q18" value="2"></label>
              <label>Parfois <input type="radio" name="q18" value="3"></label>
              <label>Rarement <input type="radio" name="q18" value="4"></label>
              <label>Jamais <input type="radio" name="q18" value="5"></label>
            </td>
          </tr>
        </tbody>
      </table>
      <div class="buttons-container">
        <button type="button" onclick="calculateScore()">Calculer le score</button>
        <button type="reset" onclick="resetForm()">Réinitialiser</button>
      </div>

    </form>

    <div id="result"></div> 
    <script>
      function calculateScore() {
        let total = 0;
        let general = 0;
        let social = 0;
        let physical = 0;
        const numQuestions = 18;
        let allQuestionsAnswered = true;
        let answeredQuestions = 0;

        for (let i = 1; i <= numQuestions; i++) {
          const questionName = `q${i}`;
          const selectedOption = document.querySelector(`input[name="${questionName}"]:checked`);

          if (selectedOption) {
            const value = parseInt(selectedOption.value);
            total += value;
            answeredQuestions++;

            // Categorization logic as provided, fixing syntax for general category
            if ([1, 2, 3, 4, 5, 6, 9, 10, 14, 16, 17, 18].includes(i)) {
              general += value;
            } else if ([7, 11, 15].includes(i)) {
              social += value;
            } else if ([8, 12, 13].includes(i)) { 

              physical += value;
            }
          } else {
            allQuestionsAnswered = false;
            break; // Exit loop if any question is unanswered
          }
        }

        
        // Handle cases where not all questions are answered for a subscale
        if (answeredQuestions < 18) {
          document.getElementById("result").innerHTML = "<p style='text-align: center; color: red;'>Veuillez répondre à toutes les questions!</p>";
          document.getElementById("result").style.display = "block";
          return; // Exit if no questions are answered
        }
        
        total = ((total / 18) - 1) * 25;
        general = ((general / 12) - 1) * 25; 
        social = ((social / 3) - 1) * 25; 
        physical = ((physical / 3) - 1) * 25; 

        display(total, general, social, physical);
      } // end calculateScore function

      function display(total, general, social, physical) {
       
        let display = "<p style='text-align: center;'>Résultats</p>";
        display += "<br>";
        display += "<ul class='myList'>";
        display += "<li>Le score total  : " + total.toFixed(2) + "</li>";
        display += "<li>Score Général : " + general.toFixed(2) + "</li>";
        display += "<li>Score Social : " + social.toFixed(2) + "</li>";
        display += "<li>Score Physique : " + physical.toFixed(2) + "</li>";
        display += "</ul>";
        display += "<p>Tous les scores sont compris entre 0 et +100.</p>" ;
        display += "<p>Le score de 0 reflète un très mauvais état de santé et 100 un excellent";

        document.getElementById("result").innerHTML = display;
        document.getElementById("result").style.display = "block";

      } // end display function

      function resetForm() {
        document.getElementById("GHSI").reset();
        document.getElementById("result").innerHTML = "";
        document.getElementById("result").style.display = "none";
      } // end resetForm function

    </script>

  </body>
</html>